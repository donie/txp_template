# cbs_navigation_menu v0.4
# Simple customizable sections navigation menu
# Christophe Beyls
# http://www.digitalia.be/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjc6InZlcnNpb24iO3M6MzoiMC40IjtzOjY6ImF1dGhvciI7czoxNjoiQ2hyaXN0
b3BoZSBCZXlscyI7czoxMDoiYXV0aG9yX3VyaSI7czoyNDoiaHR0cDovL3d3dy5kaWdpdGFs
aWEuYmUvIjtzOjExOiJkZXNjcmlwdGlvbiI7czo0NDoiU2ltcGxlIGN1c3RvbWl6YWJsZSBz
ZWN0aW9ucyBuYXZpZ2F0aW9uIG1lbnUiO3M6NDoidHlwZSI7aTowO3M6NDoibmFtZSI7czox
OToiY2JzX25hdmlnYXRpb25fbWVudSI7czo0OiJoZWxwIjtzOjMwMjI6IgoJPGgzPkRlc2Ny
aXB0aW9uPC9oMz4KCgk8cD5UaGlzIHBsdWdpbiBhbGxvd3MgdG8gY3JlYXRlIGEgY3VzdG9t
IG5hdmlnYXRpb24gbWVudSBiYXNlZCBvbiBUZXh0cGF0dGVybiBzZWN0aW9ucyBhbmQvb3Ig
ZnVsbCBleHRlcm5hbCBVUkwmIzgyMTc7cy4gWW91IGNhbiBjaG9vc2Ugd2hpY2ggc2VjdGlv
bnMgeW91IHdhbnQgdG8gZGlzcGxheSBpbiB3aGljaCBvcmRlciBhbmQgc3R5bGUgdGhlIGN1
cnJlbnQgc2VjdGlvbiBkaWZmZXJlbnRseS48L3A+CgoJPHA+T3IsIGluc3RlYWQgb2Ygc2Vj
dGlvbnMgeW91IGNhbiBzcGVjaWZ5IGZ1bGwgVVJMJiM4MjE3O3MgKHN0YXJ0aW5nIHdpdGgg
aHR0cDovLywgZnRwOi8vLCBtYWlsdG86IG9yIGFueSBvdGhlciBwcmVmaXgpIGFuZCB0aGV5
IHdpbGwgYmUgbGlua2VkICYjODIyMDthcyBpcyYjODIyMTsuPC9wPgoKCTxwPllvdSBjYW4g
YWxzbyBzcGVjaWZ5IGFjY2VzcyBrZXlzIGZvciBlYWNoIG1lbnUgZW50cnkuPC9wPgoKCTxo
Mz5TeW50YXg8L2gzPgoKPHByZT48Y29kZT4mbHQ7dHhwOmNic19uYXZpZ2F0aW9uX21lbnUg
c2VjdGlvbnM9ImEsYixjIiB0aXRsZXM9IkEsQixDIiAvJmd0OzwvY29kZT48L3ByZT4KCgk8
aDM+QXR0cmlidXRlczwvaDM+CgoJPGg0PlJlcXVpcmVkPC9oND4KCgk8dWw+CgkJPGxpPjxz
dHJvbmc+c2VjdGlvbnM8L3N0cm9uZz46IENvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHNlY3Rp
b24gbmFtZXMgb3IgZnVsbCBVUkwmIzgyMTc7cyB5b3Ugd2FudCB0byBsaW5rIGluIHlvdXIg
bmF2aWdhdGlvbiBtZW51LCBpbiBvcmRlciwgd2l0aCBubyBzcGFjZXMgYmVmb3JlIGFuZCBh
ZnRlciBjb21tYXMuIEZvciB0aGUgaG9tZXBhZ2UsIHNwZWNpZnkgJiM4MjE2O2RlZmF1bHQm
IzgyMTc7IGFzIHNlY3Rpb24gbmFtZS4gRWFjaCBlbnRyeSBpcyBpbnRlcnByZXRlZCBhcyBh
IFRleHRwYXR0ZXJuIHNlY3Rpb24sIHVubGVzcyBpdCBjb250YWlucyBhICYjODIxNzs6JiM4
MjE3OyBjaGFyYWN0ZXIgbGlrZSBpbiBhbnkgZnVsbCBVUkwgc3RhcnRpbmcgd2l0aCAmIzgy
MTY7aHR0cDovLyYjODIxNzssICYjODIxNjtmdHA6Ly8mIzgyMTc7LCAmIzgyMTY7bWFpbHRv
OiYjODIxNzssIC4uLjwvbGk+CgkJPGxpPjxzdHJvbmc+dGl0bGVzPC9zdHJvbmc+OiBDb21t
YS1zZXBhcmF0ZWQgbGlzdCBvZiB0aXRsZXMgeW91IHdhbnQgdG8gZGlzcGxheSBmb3IgZWFj
aCBzZWN0aW9uIG9mIHRoZSAmIzgyMjA7c2VjdGlvbnMmIzgyMjE7IGF0dHJpYnV0ZSBhYm92
ZSwgd2l0aCBubyBzcGFjZXMgYmVmb3JlIGFuZCBhZnRlciBjb21tYXMuPC9saT4KCTwvdWw+
CgoJPGg0Pk9wdGlvbmFsPC9oND4KCgk8dWw+CgkJPGxpPjxzdHJvbmc+YWNjZXNza2V5czwv
c3Ryb25nPjogQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2Yga2V5Ym9hcmQgYWNjZXNzIGtleXMg
dG8gYXNzb2NpYXRlIHdpdGggZWFjaCBzZWN0aW9uIGxpbmsgb2YgdGhlICYjODIyMDtzZWN0
aW9ucyYjODIyMTsgYXR0cmlidXRlIGFib3ZlLCB3aXRoIG5vIHNwYWNlcyBiZWZvcmUgYW5k
IGFmdGVyIGNvbW1hcy4gSWYgeW91IGRvbiYjODIxNzt0IHdhbnQgdG8gc3BlY2lmeSBhbiBh
Y2Nlc3Mga2V5IGZvciBhIHNlY3Rpb24sIGxlYXZlIGl0IGVtcHR5ICgmIzgyMTY7JiM4MjE3
OyksIGJ1dCB5b3UgbXVzdCBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBjb21tYXMgYXMgaW4g
dGhlICYjODIyMDtzZWN0aW9ucyYjODIyMTsgYW5kICYjODIyMDt0aXRsZXMmIzgyMjE7IGF0
dHJpYnV0ZXMuIERlZmF1bHQgaXMgbm8gYWNjZXNzIGtleXMuPC9saT4KCQk8bGk+PHN0cm9u
Zz5icmVhazwvc3Ryb25nPjogSFRNTCB0YWcgdG8gYmUgdXNlZCBmb3IgbGluZSBicmVha3Ms
IHdpdGhvdXQgYnJhY2tldHMuIERlZmF1bHQgaXMgPGNvZGU+YnI8L2NvZGU+LjwvbGk+CgkJ
PGxpPjxzdHJvbmc+d3JhcHRhZzwvc3Ryb25nPjogSFRNTCB0YWcgdG8gYmUgdXNlZCBhcyB0
aGUgd3JhcHRhZywgd2l0aG91dCBicmFja2V0cy4gRGVmYXVsdCBpcyBlbXB0eS48L2xpPgoJ
CTxsaT48c3Ryb25nPmNsYXNzPC9zdHJvbmc+OiBDU1MgY2xhc3MgYXR0cmlidXRlIGZvciB3
cmFwdGFnLCBkZWZhdWx0IGlzIG5vIGNsYXNzIGF0dHJpYnV0ZS48L2xpPgoJCTxsaT48c3Ry
b25nPmFjdGl2ZWNsYXNzPC9zdHJvbmc+OiBDU1MgY2xhc3MgYXR0cmlidXRlIHRvIGFwcGx5
IHRvIGxpbmtzIHBvaW50aW5nIHRvIHRoZSBjdXJyZW50IHNlY3Rpb24sIGlmIGFueS4gRGVm
YXVsdCBpcyBubyBjbGFzcyBhdHRyaWJ1dGUuPC9saT4KCQk8bGk+PHN0cm9uZz5hY3RpdmVu
b2xpbms8L3N0cm9uZz46IFdoZW4gc2V0IHRvIDxjb2RlPnRydWU8L2NvZGU+LCB0aGUgY3Vy
cmVudCBzZWN0aW9uIHdpbGwgbm90IGJlIGxpbmtlZCwgYnV0IHdyYXBwZWQgd2l0aCBhIDxj
b2RlPiZsdDtzcGFuJmd0OzwvY29kZT4gdGFnIGluc3RlYWQuIFRoZSBjbGFzcyBvZiB0aGUg
JiM4MjIwO2FjdGl2ZWNsYXNzJiM4MjIxOyBhdHRyaWJ1dGUgYW5kIHRoZSBpZCBvZiB0aGUg
JiM4MjIwO2lkcyYjODIyMTsgYXR0cmlidXRlLCBpZiBzcGVjaWZpZWQsIHdpbGwgYmUgYXBw
bGllZCB0byB0aGlzIDxjb2RlPiZsdDtzcGFuJmd0OzwvY29kZT4gdGFnLiBEZWZhdWx0IGlz
IDxjb2RlPmZhbHNlPC9jb2RlPi48L2xpPgoJCTxsaT48c3Ryb25nPmlkczwvc3Ryb25nPjog
Q29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgWEhUTUwgaWQgYXR0cmlidXRlcyB0byBhcHBseSB0
byBlYWNoIG1lbnUgaXRlbSwgd2l0aCBubyBzcGFjZXMgYmVmb3JlIGFuZCBhZnRlciBjb21t
YXMuIElmIHlvdSBkb24mIzgyMTc7dCB3YW50IHRvIGFkZCBhbiBpZCBhdHRyaWJ1dGUgZm9y
IGEgc2VjdGlvbiwgbGVhdmUgaXQgZW1wdHkgKCYjODIxNjsmIzgyMTc7KSwgYnV0IHlvdSBt
dXN0IGhhdmUgdGhlIHNhbWUgbnVtYmVyIG9mIGNvbW1hcyBhcyBpbiB0aGUgJiM4MjIwO3Nl
Y3Rpb25zJiM4MjIxOyBhbmQgJiM4MjIwO3RpdGxlcyYjODIyMTsgYXR0cmlidXRlcy4gRGVm
YXVsdCBpcyBubyBpZCBhdHRyaWJ1dGUuPC9saT4KCTwvdWw+CgoKCiAiO3M6NDoiY29kZSI7
czoxNTIzOiIKLyoKICAgY2JzX25hdmlnYXRpb25fbWVudSB2MC40CiAgIGJ5IENocmlzdG9w
aGUgQmV5bHMgW2h0dHA6Ly93d3cuZGlnaXRhbGlhLmJlXQoqLwoKZnVuY3Rpb24gY2JzX25h
dmlnYXRpb25fbWVudSgkYXR0cykKewoJZ2xvYmFsICRzOwoKCWV4dHJhY3QobEF0dHMoYXJy
YXkoCgkJJ3NlY3Rpb25zJyAgICA9PiBmYWxzZSwKCQkndGl0bGVzJyAgICAgID0+IGZhbHNl
LAoJCSdhY2Nlc3NrZXlzJyAgPT4gZmFsc2UsCgkJJ2JyZWFrJyAgICAgICA9PiAnYnInLAoJ
CSd3cmFwdGFnJyAgICAgPT4gJycsCgkJJ2NsYXNzJyAgICAgICA9PiAnJywKCQknYWN0aXZl
Y2xhc3MnID0+ICcnLAoJCSdhY3RpdmVub2xpbmsnPT4gJycsCgkJJ2lkcycgICAgICAgICA9
PiBmYWxzZQoJKSwkYXR0cykpOwoKCWlmKCgkc2VjdGlvbnMgPT09IGZhbHNlKSB8fCAoJHRp
dGxlcyA9PT0gZmFsc2UpKQoJCXJldHVybiAnJzsKCSRzZWN0aW9ucyA9IGV4cGxvZGUoJywn
LCAkc2VjdGlvbnMpOwoJJHNpemUgPSBjb3VudCgkc2VjdGlvbnMpOwoJJHRpdGxlcyA9IGV4
cGxvZGUoJywnLCAkdGl0bGVzKTsKCWlmKGNvdW50KCR0aXRsZXMpICE9ICRzaXplKQoJCXJl
dHVybiAnJzsKCWlmKCRhY2Nlc3NrZXlzICE9PSBmYWxzZSkgewoJCSRhY2Nlc3NrZXlzID0g
ZXhwbG9kZSgnLCcsICRhY2Nlc3NrZXlzKTsKCQlpZihjb3VudCgkYWNjZXNza2V5cykgIT0g
JHNpemUpCgkJCXJldHVybiAnJzsKCX0KCSRhY3RpdmVub2xpbmsgPSAoJGFjdGl2ZW5vbGlu
ayA9PSAndHJ1ZScpOwoJaWYoJGlkcyAhPT0gZmFsc2UpIHsKCQkkaWRzID0gZXhwbG9kZSgn
LCcsICRpZHMpOwoJCWlmKGNvdW50KCRpZHMpICE9ICRzaXplKQoJCQlyZXR1cm4gJyc7Cgl9
Cgkkb3V0ID0gYXJyYXkoKTsKCWZvcigkaSA9IDA7ICRpIDwgJHNpemU7ICsrJGkpIHsKCQkk
b3B0aW9ucyA9ICgoJGlkcyAmJiAoJGlkc1skaV0gIT0gJycpKSA/ICcgaWQ9IicuJGlkc1sk
aV0uJyInIDogJycpOwoJCWlmKHN0cnBvcygkc2VjdGlvbnNbJGldLCAnOicpICE9PSBmYWxz
ZSkgewoJCQkkbGluayA9ICRzZWN0aW9uc1skaV07CgkJfSBlbHNlIHsKCQkJaWYoJHNlY3Rp
b25zWyRpXSA9PSAkcykgewoJCQkJaWYoJGFjdGl2ZWNsYXNzKQoJCQkJCSRvcHRpb25zIC49
ICcgY2xhc3M9IicuJGFjdGl2ZWNsYXNzLiciJzsKCQkJCWlmKCRhY3RpdmVub2xpbmspIHsK
CQkJCQkkb3V0W10gPSB0YWcoJHRpdGxlc1skaV0sICdzcGFuJywgJG9wdGlvbnMpOwoJCQkJ
CWNvbnRpbnVlOwoJCQkJfQoJCQl9CgkJCSRsaW5rID0gcGFnZWxpbmt1cmwoYXJyYXkoJ3Mn
PT4kc2VjdGlvbnNbJGldKSk7CgkJfQoJCSRvdXRbXSA9IHRhZygkdGl0bGVzWyRpXSwgJ2En
LCAnIGhyZWY9IicuJGxpbmsKCQkJCQkuKCgkYWNjZXNza2V5cyAmJiAoJGFjY2Vzc2tleXNb
JGldICE9ICcnKSkgPyAnIiBhY2Nlc3NrZXk9IicuJGFjY2Vzc2tleXNbJGldLiciJyA6ICci
JykKCQkJCQkuJG9wdGlvbnMpOwoJfQoJcmV0dXJuIGRvV3JhcCgkb3V0LCAkd3JhcHRhZywg
JGJyZWFrLCAkY2xhc3MpOwp9CiI7czozOiJtZDUiO3M6MzI6IjU5NjM2M2VkN2IxNmY2NzU0
NWU3ZjVkYTIwNDViYThmIjt9
